{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Home</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	 <link rel="stylesheet" type="text/css" href="{% static 'dgm/home.css' %}">
	 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
 
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

	<link href="https://fonts.googleapis.com/css2?family=Gotu&family=Righteous&display=swap" rel="stylesheet">
		<style>
		.jumbotron {
		  background-image: url("{% static '/images/sky1.jpg' %}"); 
		  background-repeat: no-repeat;
		  background-attachment: fixed;
		  background-size: cover;
		}
		</style>
</head>
<body> 
	<div class="container" >
		<div class="title-header"><img src="{% static '/images/aai.jpg' %}">PREVENTIVE MAINTENANCE LOG</div>
		<div class="jumbotron">
			<div class="row">
				<div class="col-md-3">
					<div class="card cardlogo" style="word-wrap: break-word;" >
						<img class="card-img-top" src="{% static '/images/man1.jpg' %}" alt="FACE">
						<div class="card-body">
						  	<br>
						  	
						    <h5 class="card-title">Linus Trovaldas</h5>
							<div class="data-emp">
								<h6 class="card-subsubtitle">DGM</h6>
								
								<br>
								
								<h6 class="card-subsubtitle">Vadodara Airport</h6>
														
								<br>
							</div>
					   </div>
					</div>
					<div class="card cardcontact">	
						<div class="card-body headcard">
							
							<b>Sup: </b>
						
							<br>
							<button class="btn btn-primary contactbut" data-toggle="modal" data-target="#contactsuper" href='#'>Contact</button>
						
							<br>
						</div>
					</div>
					<div class="modal fade" id="contactsuper">
					    <div class="modal-dialog">
					      	<div class="modal-content">
						        <div class="modal-header">
						          <h3 class="modal-title">SUPERVISOR</h3>
						        </div>
						        <div class="modal-body" >
						        	
						          <h4>Name:</h4>
						          <h5>Email: <a data-toggle="modal" data-target="#report" href='#'></a></h5>
						          <!--put the contact in the a href as mailto:{{ contact }} and outside in phone too-->
						          <h5>Phone:</h5>
									
						        </div>
					        
						        <div class="modal-footer">
						          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
						    	</div>  
					     	</div>
					    </div>
					</div>

					<div class="modal fade" id="report">
						<div class="modal-dialog">
						  <div class="modal-content">
							<div class="modal-header">
							  <h4 class="modal-title">SEND REPORT TO SUPERVISOR<button type="button" class="close" data-dismiss="modal">&times;</button></h4>
							</div>
							<div class="modal-body" style="margin-left:30px; margin-right:30px">
							 	<div class="helloform" style="padding:0">
									<form method='post' action="/sent/" >
										
						         		<br>
										<div class="form-group row has-warning">
											<label for="to" class="col-sm-6 col-form-label">TO: </label>
										</div>
										<div class="form-group row has-warning">
											<label for="Subject" class="col-sm-6 col-form-label">SUBJECT:</label>
										</div>
										<hr>
										<div class="form-group row has-warning">
											<label for="body" class="col-sm-6 col-form-label">BODY:</label>
											<div>
											  <textarea rows="5" placeholder="Enter message" size="100" name='feedback' value="Hello {{ sup.name }}, this is regarding the issue." required style="width:16rem;"></textarea> 
											</div>
										</div>
										<hr>                                                  
										<input type="submit" value="SEND">
										
									</form>
					  		 	</div>
							</div>
					      </div>
					    </div>
				    </div>      
				</div>	
	
				<div class="col-md-2">
				</div>

				<div class="data-table">
					<div class="col-md-3" >
						<div class="card tabcard">
							<ul class="nav nav-pills nav-stacked">
							    <li class="active"><a class="todays" data-toggle="pill" href="#today" >Communication</a></li>
								<li><a class="faculty" data-toggle="pill" href="#facilities" >Navigation</a></li>
								<li><a class="faculty" data-toggle="pill" href="#verific" >Surveillance</a></li>
								
							 </ul>
						 	<button class="btn btn-primary logout" onclick="window.location.href='/logout/{{ id }}'"> Logout</button>
		   				</div>
					</div>
				</div>
				<div class="col-md-4 card tabcol">
					<div class="tab-content">
			    		<div id="today" class="tab-pane fade in active fac">
			    			<h3 class="card cardcontact"> Overview </h3>
							{% block content %}
						    	<canvas id="pie-chart"></canvas>
						 	<button class="btn-primary" style="float: right;" onclick='window.location.href="/dgm/communication"'>MORE DETAILS</button>
					    </div>
					    <div id="facilities" class="tab-pane fade fac">
					    	<h3 class="card cardcontact"> Overview </h3>
							<canvas id="population-chart"></canvas>
							<button class="btn-primary" style="float: right;" onclick='window.location.href="/dgm/navigation"'>MORE DETAILS</button>
						</div>
							{% endblock %}
						<div id="verific" class="tab-pane fade fac">
							<h3 class="card cardcontact"> Overview </h3>
							<h1>BAR GRAPH HERE</h1>
							<button class="btn-primary" style="float: right;" onclick='window.location.href="/dgm/surveillance"'href="#">MORE DETAILS</button>
						</div>
					</div>		
				</div>
			</div>
		</div>
	</div>
	



	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script>
    var config = {
      type: 'pie',
      data: {
		labels: [{% for i in p_labels %}"{{i}}",{% endfor %}],
        datasets: [{
          data: [{% for i in p_data %}{{ i }},{% endfor %}],
          backgroundColor: [
            '#1E72FA', '#11b461', '#bf0033', '#C0C0C0', '#D3D3D3'
          ],
          label: 'r_count'
        }],
        
      },
      options: {
        responsive: true
      }
    };

    
    window.onload = function() {
      var ctx = document.getElementById('pie-chart').getContext('2d');
      window.myPie = new Chart(ctx, config);

       var ctx1 = document.getElementById('population-chart').getContext('2d');
      window.mybar = new Chart(ctx1, config1);
    };

    
	var config1 = {
        type: 'bar',
        data: {
        	labels: [{% for i in p_labels %}"{{ i }}",{% endfor %}],/*need an object that should have dates*/           
          datasets: [
          {
          	data: {{ p_data|safe }},/*This object should have all pending values*/
            backgroundColor: 'blue',
            label: 'pending' 
          },
          {
          	data: {{ c_data|safe }},/*This object should have all declined values*/
            backgroundColor: 'red',
            label:'completed' 
          },
          {
          	data: {{ e_data|safe }},
            backgroundColor: 'green',/*This object should have all approved values*/
            label: 'completed with errors' 
          }
          ]
                  
        },
        options: {
          responsive: true,
          legend: {
            position: 'top',
          },
          title: {
            display: true,
            text: 'Report bar chart'
          }
        }
      };



  </script>

         
    
</body>
</html>